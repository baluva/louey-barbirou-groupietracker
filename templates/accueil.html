{{define "accueil"}}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>Leaderboard des Cryptomonnaies</title>
</head>
<header >
    <div class="head-left">
        <img src="../static/images/logo.png" class="logo">

    </div>

    <div class="head-right">
        <form action="/search" method="get">
            <div class="searchBox">
                <input class="searchInput"type="text" name="Symbol" placeholder="Search">
                <button class="searchButton" href="#">
                    <i class="material-icons">
                        <img class="imgL" src="../static/images/loupe.png">
                    </i>
                </button>
            </div>

        </form>
    </div>
</header>
<body>
    <script>
        function toggleFavorite(symbol) {
            // Basculer la classe CSS (par exemple, pour changer la couleur du cœur)
            const btn = document.querySelector(`button[data-symbol="${symbol}"]`);
            btn.classList.toggle("favorite");
        
            // Envoyer une requête au serveur pour mettre à jour les favoris
            fetch('/favorite', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ symbol }),
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch((error) => console.error('Error:', error));
        }
        </script>
    <table class="content-table">
        <thead>
            <tr>
                <th></th> <!-- For image -->
                <th>Symbole</th>
                <th>Prix (USD)</th>
                <th>24h %</th>
                <th>Cap. Marché</th>
            </tr>
        </thead>
        <tbody>
            {{range .Data}}
            <tr class="content">
                <td>
                    <!-- Ensure the symbol is lowercase for the image URL -->
                    <img src="https://assets.coincap.io/assets/icons/{{.Symbol}}@2x.png" alt="{{.Symbol}}">
                </td>
                <td>{{.Symbol}}</td>
                <td>${{printf "%.2f" .Quote.USD.Price}}</td>
                <td>{{printf "%.2f%%" .Quote.USD.PercentChange24h}}</td>
                <td>${{printf "%.0f" .Quote.USD.MarketCap}}</td>
                <td>
                    <button class="favorite-btn" data-symbol="{{.Symbol}}" onclick="toggleFavorite('{{.Symbol}}')">
                        ❤️
                    </button>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</body>
</html>
</form>

{{end}}
